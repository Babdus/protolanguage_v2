import pickle

modifiers = {
    'ᵝ': {'actions': [('add', 'LZ')]},
    '˞': {'actions': [('add', 'RZ')]},
    'ʲ': {'actions': [('add', 'PZ')]},
    'ˠ': {'actions': [('add', 'VZ')]},
    'ʷ': {'actions': [('add', 'LZ'), ('add', 'VZ')]},
    'ˁ': {'actions': [('add', 'HZ')]},
    'ˀ': {'actions': [('add', 'GZ')]},
    'ˡ': {'actions': [('add', 'LA')]},
    'ʰ': {'actions': [('add', 'AS')]},
    'ʱ': {'actions': [('add', 'AS'), ('add', 'VO')]},
    'ʼ': {'actions': [('add', 'EJ')]},
    u'\u0303': {'actions': [('add', 'NZ')]},
    u'\u030a': {'actions': [('remove', 'VO')]},
    u'\u0322': {'actions': [('set_place', 'RE')]},
    u'\u0325': {'actions': [('remove', 'VO')]},
    u'\u032c': {'actions': [('add', 'VO')]},
    u'\u031f': {'actions': [('advance', '')]},
    u'\u031e': {'actions': [('lower', '')]},
    u'\u031d': {'actions': [('upper', '')]},
    u'\u032a': {'actions': [('dentalize', '')]},
    u'\u0339': {'actions': [('add', 'LH'), ('remove', 'LZ')]},
    u'\u02be': {'actions': [('add', 'LH'), ('remove', 'LZ')]},
    u'\u0348': {'actions': [('add', 'IT')]}
}

ignore_set = {
    '.', 'ˈ', 'ˌ', 'ː', ':', 'ˑ', '*', '´', '′', '˘', '˧', '˩', '˨', '˦', '˥', 'ꜜ', '1',
    '2', '²', '³', '⁽', '⁾', '/', '(', ')', '⟨', '⟩', 'ˣ', '‿', ' ',
    u'\u0300', u'\u0301', u'\u0302', u'\u0304', u'\u030c', u'\u031a', u'\u0320',
    u'\u0324', u'\u0329', u'\u032f', u'\u0330', u'\u033a', u'\u033b', u'\u035C',
    u'\u0361', u'\u1dc4', u'\u1dc5', u'\u1dc8'
}

replace_with = {
    'ṭ': 't',
    'ᵈ': 'd',
    'ḍ': 'ɖ',
    'ɡ': 'g',
    'ᶢ': 'g',
    'ḿ': 'm',
    'ᵐ': 'm',
    'ᶬ': 'ɱ',
    'ṅ': 'n',
    'ǹ': 'n',
    'ⁿ': 'n',
    'ṉ': 'n',
    'ṇ': 'ɳ',
    'ñ': 'ɲ',
    'ᵑ': 'ŋ',
    'ŕ': 'r',
    'ṛ': 'r',
    'ṟ': 'r',
    'ḥ': 'h',
    'ĺ': 'l',
    'ḹ': 'l',
    'ḻ': 'ɻ',
    'ṣ': 'ʂ',

    'ī': 'i',
    'î': 'i',
    'í': 'i',
    'ì': 'i',
    'ḭ': 'i',
    'ǐ': 'i',
    'ý': 'y',
    'ẏ': 'y',
    'ù': 'u',
    'ū': 'u',
    'ú': 'u',
    'û': 'u',
    'ǔ': 'u',
    'ṵ': 'u',
    'ṳ': 'u',
    'é': 'e',
    'è': 'e',
    'ê': 'e',
    'ē': 'e',
    'ĕ': 'e',
    'ě': 'e',
    'ḛ': 'e',
    'ó': 'o',
    'ò': 'o',
    'ô': 'o',
    'ō': 'o',
    'ǣ': 'æ',
    'á': 'a',
    'â': 'a',
    'ā': 'a',
    'à': 'a',
    'ǎ': 'a',
    'ạ': 'a',

    'ʴ': '˞',
    'ṃ': u'\u0303'
}

letters = {
    'p': {'LB', 'PL'},
    'b': {'LB', 'PL', 'VO'},
    'p' + u'\u032a': {'LD', 'PL'},
    'b' + u'\u032a': {'LD', 'PL', 'VO'},
    't': {'AL', 'PL'},
    'd': {'AL', 'PL', 'VO'},
    'ʈ': {'RE', 'PL'},
    'ɖ': {'RE', 'PL', 'VO'},
    'c': {'PA', 'PL'},
    'ɟ': {'PA', 'PL', 'VO'},
    'k': {'VE', 'PL'},
    'g': {'VE', 'PL', 'VO'},
    'q': {'UV', 'PL'},
    'ɢ': {'UV', 'PL', 'VO'},
    'ʡ': {'PH', 'PL'},
    'ʔ': {'GL', 'PL'},

    'm': {'LB', 'NA', 'VO'},
    'ɱ': {'LD', 'NA', 'VO'},
    'n': {'AL', 'NA', 'VO'},
    'ɳ': {'RE', 'NA', 'VO'},
    'ɲ': {'PA', 'NA', 'VO'},
    'ŋ': {'VE', 'NA', 'VO'},
    'ɴ': {'UV', 'NA', 'VO'},

    'ʙ': {'LB', 'VI', 'VO'},
    'r': {'AL', 'VI', 'VO'},
    'ɽr': {'RE', 'VI', 'VO'},
    'ʀ': {'UV', 'VI', 'VO'},
    'ʜ': {'PH', 'VI'},
    'ʢ': {'PH', 'VI', 'VO'},

    'ⱱ' + u'\u031f': {'LB', 'TA', 'VO'},
    'ⱱ': {'LD', 'TA', 'VO'},
    'ɾ': {'AL', 'TA', 'VO'},
    'ɽ': {'RE', 'TA', 'VO'},
    'ʀ̆': {'UV', 'TA', 'VO'},
    'ʢ̆': {'PH', 'TA', 'VO'},

    'ɸ': {'LB', 'NS'},
    'β': {'LB', 'NS', 'VO'},
    'f': {'LD', 'NS'},
    'v': {'LD', 'NS', 'VO'},
    'θ': {'DE', 'NS'},
    'ð': {'DE', 'NS', 'VO'},
    's': {'AL', 'SS'},
    'z': {'AL', 'SS', 'VO'},
    'ʃ': {'PO', 'SS'},
    'ʒ': {'PO', 'SS', 'VO'},
    'ʂ': {'RE', 'SS'},
    'ʐ': {'RE', 'SS', 'VO'},
    'ç': {'PA', 'NS'},
    'ʝ': {'PA', 'NS', 'VO'},
    'x': {'VE', 'NS'},
    'ɣ': {'VE', 'NS', 'VO'},
    'χ': {'UV', 'NS'},
    'ʁ': {'UV', 'NS', 'VO'},
    'ħ': {'PH', 'NS'},
    'ʕ': {'PH', 'NS', 'VO'},
    'h': {'GL', 'NS'},
    'ɦ': {'GL', 'NS', 'VO'},
    'ɬ': {'AL', 'NS', 'LA'},
    'ɮ': {'AL', 'NS', 'LA', 'VO'},

    'pɸ': {'LB', 'NF'},
    'bβ': {'LB', 'NF', 'VO'},
    'ts': {'AL', 'SF'},
    'dz': {'AL', 'SF', 'VO'},
    'tɕ': {'AL', 'PA', 'SF'},
    'dʑ': {'AL', 'PA', 'SF', 'VO'},
    'tʃ': {'PO', 'SF'},
    'dʒ': {'PO', 'SF', 'VO'},
    'ʈʂ': {'RE', 'SF'},
    'ɖʐ': {'RE', 'SF', 'VO'},
    'cç': {'PA', 'NF'},
    'ɟʝ': {'PA', 'NF', 'VO'},
    'kx': {'VE', 'NF'},
    'gɣ': {'VE', 'NF', 'VO'},
    'qχ': {'UV', 'NF'},
    'ɢʁ': {'UV', 'NF', 'VO'},
    'ʡħ': {'PH', 'NF'},
    'ʡʕ': {'PH', 'NF', 'VO'},
    'ʔh': {'GL', 'NF'},
    'ʔɦ': {'GL', 'NF', 'VO'},


    'ʋ': {'LD', 'SV', 'VO'},
    'ɹ': {'AL', 'SV', 'VO'},
    'ɹ' + u'\u0320': {'PO', 'SV', 'VO'},
    'ɻ': {'RE', 'SV', 'VO'},
    'j': {'PA', 'SV', 'VO'},
    'ɰ': {'VE', 'SV', 'VO'},

    'l': {'AL', 'SV', 'LA', 'VO'},
    'ɬ': {'AL', 'NS', 'LA'},
    'ɮ': {'AL', 'NS', 'LA', 'VO'},
    'ɭ': {'RE', 'SV', 'LA', 'VO'},
    'ɭ' + u'\u031d': {'RE', 'NS', 'LA', 'VO'},
    'ʎ': {'PA', 'SV', 'LA', 'VO'},
    'ʎ' + u'\u031d': {'PA', 'NS', 'LA', 'VO'},
    'ʟ': {'VE', 'SV', 'LA', 'VO'},
    'ʟ' + u'\u031d': {'VE', 'NS', 'LA', 'VO'},

    'ʘ': {'LB', 'PL', 'EJ', 'IN'},
    'ǀ': {'DE', 'PL', 'EJ', 'IN'},
    'ǃ': {'AL', 'PL', 'EJ', 'IN'},
    '‼': {'RE', 'PL', 'EJ', 'IN'},
    'ǂ': {'PA', 'PL', 'EJ', 'IN'},
    'ʞ': {'VE', 'PL', 'EJ', 'IN'},
    'ǁ': {'AL', 'PL', 'LA', 'EJ', 'IN'},

    'ɓ': {'LB', 'PL', 'VO', 'IN'},
    'ɗ': {'AL', 'PL', 'VO', 'IN'},
    'ᶑ': {'RE', 'PL', 'VO', 'IN'},
    'ʄ': {'PA', 'PL', 'VO', 'IN'},
    'ɠ': {'VE', 'PL', 'VO', 'IN'},
    'ʛ': {'UV', 'PL', 'VO', 'IN'},

    'ʍ': {'LB', 'VZ', 'SV'},
    'w': {'LB', 'VZ', 'SV', 'VO'},
    'ɥ': {'LB', 'PZ', 'SV', 'VO'},
    'ɫ': {'AL', 'VZ', 'SV', 'LA', 'VO'},
    'ɺ': {'AL', 'TA', 'LA', 'VO'},
    'ɕ': {'AL', 'PA', 'SS'},
    'ʑ': {'AL', 'PA', 'SS', 'VO'},
    'ȵ': {'AL', 'PA', 'VO', 'NA'},
    'ɧ': {'PO', 'VE', 'SS'},

    'i': {'PA', 'CL', 'VO'},
    'ĩ': {'PA', 'CL', 'VO', 'NZ'},
    'y': {'LZ', 'PA', 'CL', 'VO'},
    'ỹ': {'LZ', 'PA', 'CL', 'VO', 'NZ'},
    'ɨ': {'NE', 'CL', 'VO'},
    'ʉ': {'LZ', 'NE', 'CL', 'VO'},
    'ɯ': {'VE', 'CL', 'VO'},
    'u': {'LZ', 'VE', 'CL', 'VO'},
    'ũ': {'LZ', 'VE', 'CL', 'VO', 'NZ'},
    'ɪ': {'PZ', 'NE', 'NC', 'VO'},
    'ʏ': {'LZ', 'PZ', 'NE', 'NC', 'VO'},
    'ʊ': {'LZ', 'VZ', 'NE', 'NC', 'VO'},
    'e': {'PA', 'MC', 'VO'},
    'ẽ': {'PA', 'MC', 'VO', 'NZ'},
    'ø': {'LZ', 'PA', 'MC', 'VO'},
    'ɘ': {'NE', 'MC', 'VO'},
    'ɵ': {'LZ', 'NE', 'MC', 'VO'},
    'ɤ': {'VE', 'MC', 'VO'},
    'o': {'LZ', 'VE', 'MC', 'VO'},
    'õ': {'LZ', 'VE', 'MC', 'VO', 'NZ'},
    'ə': {'NE', 'MI', 'VO'},
    'ɛ': {'PA', 'MO', 'VO'},
    'œ': {'LZ', 'PA', 'MO', 'VO'},
    'ɜ': {'NE', 'MO', 'VO'},
    'ɞ': {'LZ', 'NE', 'MO', 'VO'},
    'ʌ': {'VE', 'MO', 'VO'},
    'ɔ': {'LZ', 'VE', 'MO', 'VO'},
    'æ': {'PA', 'NO', 'VO'},
    'ɐ': {'NE', 'NO', 'VO'},
    'a': {'PA', 'OP', 'VO'},
    'ã': {'PA', 'OP', 'VO', 'NZ'},
    'ɶ': {'LZ', 'PA', 'OP', 'VO'},
    'ä': {'NE', 'OP', 'VO'},
    'ɑ': {'VE', 'OP', 'VO'},
    'ɒ': {'LZ', 'VE', 'OP', 'VO'},
    'ɚ': {'RZ', 'NE', 'MI', 'VO'},
    'ɝ': {'RZ', 'NE', 'MO', 'VO'}
}

features_info = {
    'X': (0, '', 'place'),
    'LB': (1, 'Labial', 'place'),
    'LD': (2, 'Labiodental', 'place'),
    'LL': (3, 'Labiolingual', 'place'),
    'DE': (4, 'Dental', 'place'),
    'AL': (5, 'Alveolar', 'place'),
    'PO': (6, 'Postalveolar', 'place'),
    'RE': (7, 'Retroflex', 'place'),
    'PA': (8, 'Palatal', 'place'),
    'NE': (9, 'Neutral', 'place'),
    'VE': (10, 'Velar', 'place'),
    'UV': (11, 'Uvular', 'place'),
    'PH': (12, 'Pharyngeal', 'place'),
    'GL': (13, 'Glottal', 'place'),
    'LZ': (14, 'Labialized', 'secondary_place'),
    'LH': (15, 'Half-labialized', 'secondary_place'),
    'RZ': (16, 'Rhoticized', 'secondary_place'),
    'PZ': (17, 'Palatalized', 'secondary_place'),
    'VZ': (18, 'Velarized', 'secondary_place'),
    'HZ': (19, 'Pharyngealized', 'secondary_place'),
    'GZ': (20, 'Glottalize', 'secondary_place'),
    'NZ': (21, 'Nasalized', 'secondary_manner'),
    'NA': (22, 'Nasal', 'manner'),
    'PL': (23, 'Plosive', 'manner'),
    'NF': (24, 'Nonsibilant affricate', 'manner'),
    'SF': (25, 'Sibilant affricate', 'manner'),
    'NS': (26, 'Nonsibilant fricative', 'manner'),
    'SS': (27, 'Sibilant fricative', 'manner'),
    'VI': (28, 'Vibrant', 'manner'),
    'TA': (29, 'Tap', 'manner'),
    'SV': (30, 'Approximant', 'manner'),
    'CL': (31, 'Closed', 'manner'),
    'NC': (32, 'Near-closed', 'manner'),
    'MC': (33, 'Mid-closed', 'manner'),
    'MI': (34, 'Mid', 'manner'),
    'MO': (35, 'Mid-open', 'manner'),
    'NO': (36, 'Near-open', 'manner'),
    'OP': (37, 'Opened', 'manner'),
    'LA': (38, 'Lateral', 'secondary_manner'),
    'VO': (39, 'Voiced', 'airflow'),
    'AS': (40, 'Aspirated', 'airflow'),
    'EJ': (41, 'Ejective', 'airflow'),
    'IT': (42, 'Intensive', 'airflow'),
    'IN': (43, 'Ingressive', 'airflow')
}

ipa_rules = {
    'advance': {
        'LD': 'LB',
        'DE': 'LL',
        'AL': 'DE',
        'PO': 'AL',
        'RE': 'PO',
        'NE': 'PA',
        'VE': 'NE',
        'UV': 'VE',
        'PH': 'UV',
        'GL': 'PH'
    },
    'lower': {
        'PL': 'NS',
        'NF': 'NS',
        'SF': 'SS',
        'NS': 'SV',
        'SS': 'SV',
        'VI': 'SV',
        'TA': 'SV',
        'SV': 'CL',
        'CL': 'SV',
        'NC': 'MC',
        'MC': 'MI',
        'MI': 'MO',
        'MO': 'NO',
        'NO': 'OP'
    },
    'upper': {
        'NF': 'PL',
        'SF': 'PL',
        'NS': 'PL',
        'SS': 'PL',
        'VI': 'NS',
        'TA': 'PL',
        'SV': 'NS',
        'CL': 'SV',
        'NC': 'CL',
        'MC': 'NC',
        'MI': 'MC',
        'MO': 'MI',
        'NO': 'MO',
        'OP': 'NO'
    },
    'dentalize': {
        'LB': 'LD',
        'AL': 'DE',
        'PO': 'DE'
    }
}

feature_subsets = {
    'vowel_manners': {'CL', 'NC', 'MC', 'MI', 'MO', 'NO', 'OP'}
}

with open('pickles/ipa_modifiers_dict.pickle', 'wb') as f:
    pickle.dump(modifiers, f)

with open('pickles/ipa_char_replace_dict.pickle', 'wb') as f:
    pickle.dump(replace_with, f)

with open('pickles/ipa_letters_dicts.pickle', 'wb') as f:
    pickle.dump(letters, f)

with open('pickles/ipa_ignore_symbols_set.pickle', 'wb') as f:
    pickle.dump(ignore_set, f)

with open('pickles/features_info.pickle', 'wb') as f:
    pickle.dump(features_info, f)

with open('pickles/ipa_rules.pickle', 'wb') as f:
    pickle.dump(ipa_rules, f)

with open('pickles/feature_subsets.pickle', 'wb') as f:
    pickle.dump(feature_subsets, f)
